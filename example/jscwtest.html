<!DOCTYPE html>
<meta charset="utf-8"/>
<title>jscwlib - JavaScript Morse code Library - working example showing most functions</title>
<body>
    <script src="../src/jscwlib.js"></script>
    <script>
    var m = new jscw();
    m.setText("Hello");
    m.onFinished = function () {
        console.log("onFinished");
    }

    window.setInterval(ret, 100);
    function ret () {
        if (m) {
            document.getElementById('rem').innerHTML = m.getRemaining() + " / " + m.getLength();
            if (m.getRemaining()) 
                m.oscilloscope(document.getElementById('osci'));
        }
    }

    function make_paris () {
        var eff = document.getElementById('eff').innerHTML;
        document.getElementById('text').value = "";
        for (var i = 0; i < eff; i++) {
            document.getElementById('text').value += "PARIS ";
        }
    }

    </script>
    <div id="lamp" style="background-color:white;"><br><br><br><br><br></div>

    <input type="text" id="text" size=80 value="PARIS">
    <button onclick="m.play(document.getElementById('text').value);">Play</button>
    <button onclick="m.pause();">Pause</button>
    <button onclick="make_paris();">Paris Generator</button>

    <br>
    Freq (<span id="freq">600</span>): <input type="range" min="200" max="1500" step="10" onChange="m.setFreq(this.value);m.play('test');document.getElementById('freq').innerHTML=this.value;"> <br>
    Filter (<span id="filter">600</span>): <input type="range" min="200" max="1500" step="10" onChange="m.setFilter(this.value);m.play('test');document.getElementById('filter').innerHTML=this.value;"> <br>
    WpM (<span id="wpm">20</span>): <input type="range" min="5" max="100" step="1" onChange="m.setWpm(this.value);m.play('test');document.getElementById('wpm').innerHTML=this.value;"> <br>
    Eff (<span id="eff">20</span>): <input type="range" min="5" max="100" step="1" onChange="m.setEff(this.value);m.play('test');document.getElementById('eff').innerHTML=this.value;"> <br>
    Remaining play time: <span id="rem">0 </span>s

    <br>
    <button onclick="m.draw(document.getElementById('canvas'));">Draw</button>
    <button onclick="m.oscilloscope(document.getElementById('osci'));">Start Oscilloscope</button>

    <br>
    <input onclick="m.setReal(this.checked);" type="checkbox" value="1"> Real speed (no PARIS, no Farnsworth)

    <br>
    <canvas width=1000 height=20 id="canvas">
    </canvas>
    <br>

    <canvas width=1400 height=400 id="osci">
    </canvas>

    <br>
    <br>
    <div class="smallplayer" id="ply">
    </div>

    <script>
        m.renderPlayer("ply", m);
    </script>

    <button onclick="m.setQ(1);m.setVolume(3);">Q1</button>
    <button onclick="m.setQ(3);m.setVolume(2.5);">Q3</button>
    <button onclick="m.setQ(5);m.setVolume(2);">Q5</button>
    <button onclick="m.setQ(10);m.setVolume(1);">Q10</button>
    <button onclick="m.setQ(15);m.setVolume(0.5);">Q15</button>
    <button onclick="m.setQ(20);m.setVolume(0.3);">Q20</button>
    <button onclick="m.setQ(25);m.setVolume(0.2);">Q25</button>

    <br>
    <br>
    <br>


    <a href="https://fkurz.net/ham/jscwlib.html">jscwlib - homepage</a>

</body>
